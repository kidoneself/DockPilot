:8888 {
    root * /usr/share/html

    handle /api/* {
        uri strip_prefix /api
        reverse_proxy localhost:8080
    }

    handle /ws/* {
        reverse_proxy localhost:8080 {
            header_up Upgrade {http.upgrade}
            header_up Connection {http.connection}
        }
    }

    handle /uploads/* {
        root * /dockpilot
        file_server
        header Cache-Control "public, max-age=2592000"
        header Access-Control-Allow-Origin "*"
    }

    handle {
        try_files {path} /index.html
        file_server
    }

    log {
        output file /dockpilot/logs/caddy.log
        level INFO
    }
}