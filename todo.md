# 待办任务清单

## 待完成
1. [ ] 增加代理热更新
2. [ ] 发布到dockerhub
3. [ ] 生成家庭影院和代理的安装模板
4. [ ] 容器的配置信息获取区分IPV4和IPV6
5. [ ] 宿主机创建文件夹
6. [ ] 比较容器使用的镜像ID和本地镜像的ID是否一样显示是否更新容器，通过现有配置更新容器
   - 更新流程：
     1. 镜像更新检测：
        - 每小时检测镜像更新
        - 当检测到镜像有新版本时，更新镜像状态
        - 同时检查使用该镜像的容器，标记这些容器可以更新
     2. 容器更新状态：
        - 在容器信息中添加更新状态字段（needUpdate, currentImageId, latestImageId）
        - 当镜像更新时，自动更新相关容器的更新状态
     3. 更新流程：
        - 镜像更新检测 -> 发现新版本 -> 更新镜像 -> 标记相关容器可更新 -> 前端显示更新提示
        - 用户点击更新 -> 使用新镜像更新容器 -> 更新完成
     4. 前端显示：
        - 在容器列表中显示更新状态
        - 当容器可更新时，显示更新按钮
        - 显示当前使用的镜像版本和可用的新版本

## 待完善
1. [ ] 完善代理，无代理，镜像加速使用逻辑
2. [ ] 完善代理或者镜像加速逻辑
3. [ ] 容器的更新流程
4. [ ] 容器启动后实际后台还在启动，前端就登录出错
5. [ ] 镜像列表检查更新增加load效果
6. [ ] 镜像列表排序
7. [ ] 网络模式展示上添加（bright）
8. [ ] 网络模式端口选择下拉款的逻辑完善
9. [ ] 所有输入的校验

## 已完成
1. [x] 已完成任务1
2. [x] 已完成任务2

## 已完善
1. [x] 已完善任务1
2. [x] 已完善任务2

## 说明
- 使用 `- [ ]` 表示未完成的任务
- 使用 `- [x]` 表示已完成的任务
- 可以随时添加新的任务
- 完成的任务可以移动到"已完成"或"已完善"部分

## 2024-03-24
[x] 修复WebSocket连接问题：在检查镜像时可能出现的 "Cannot read properties of undefined (reading 'send')" 错误
   - 修复了 docker.ts 中方法导出方式导致的 this 上下文丢失问题
   - 使用箭头函数包装 checkImages 和 pullImage 方法以保持 this 上下文
   - 确保了 WebSocket 方法调用时的正确上下文 

